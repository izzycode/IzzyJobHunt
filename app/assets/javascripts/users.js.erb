// Place all the behaviors and hooks related to the matching controller here.
// All this logic will automatically be available in application.js.

// Opens 3 pages for job searching
function open_win(event) {
  event.preventDefault();
  var what = $('#what').val().trim().replace(/\s/g,"+");
  var where = $('#where').val().trim().replace(/\s/g,"+");
  var whatLink = $('#what').val().trim().replace(" ","-");
  var whereLink = $('#where').val().trim().replace(" ","-");

  window.open("https://www.indeed.com/jobs?q="+what+"&l="+where);
  window.open("https://ziprecruiter.com/candidate/search?search="+what+"&location="+where);
  window.open("https://www.linkedin.com/jobs/"+whatLink+"-jobs-"+whereLink+"?trk=jserp_search_button_execute");
}



$(document).on('ready page:change',function(){
// Adds neon glow when jobs count reaches 10
  if (parseInt($('#ten').text()) > 9) {
    $('#ten').addClass('neon-glow')
  }
// Adds neon glow when contacts count reaches 10
  if ($('#thirty').text() > 9) {
    $('#thirty').addClass('neon-glow')
  }


// Displays tour1 when user signs in for the first time
  if (gon.tour1 === 1){
    var $t1 = $('.tour1')
    $t1.filter('.t1').attr("data-intro","Add jobs you applied for.");
    $t1.filter('.t2').attr({"data-intro":"Edit your name, Log Out and always find your way back.","data-position":"left"});
    $t1.filter('.t3').attr({"data-intro":"Quickly search for jobs in Linkedin, Indeed and Ziprecruiter with one click!","data-position":"right"});

    // chardin full page tour
    $('body').chardinJs('start');
  }

// Displays tour2 when first time new job will be added
  if (gon.tour2 === 2){
    $('.tour2').attr("data-intro","Just drag and drop/copy and paste the job posting's URL");

    $('body').chardinJs('start');
  };

// Displays tour3 after first job has been added
  if (gon.tour3 === 3){
    $t3 = $('.tour3')
    $t3.filter('.t31').attr({"data-intro":"You can expand on the Applied job to add details.", "data-position":"bottom"});
    $t3.filter('.t32').attr({"data-intro":"Edit the job's info.", "data-position":"bottom"});
    $t3.filter('.t33').attr({"data-intro":"Click on the company name to add/edit details.", "data-position":"top"});

    $('body').chardinJs('start');
  };


})
